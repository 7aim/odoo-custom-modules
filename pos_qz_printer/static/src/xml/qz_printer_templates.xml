<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">

    <t t-name="pos_qz_printer.QZPrintAction">
        <div class="qz-print-action p-4" style="min-width: 500px;">
            <!-- Preview Mode -->
            <div t-if="state.mode === 'preview'" class="text-center">
                <h4 class="mb-4">
                    <i class="fa fa-print me-2"></i>
                    Çap Önizləmə
                </h4>
                
                <!-- Receipt Preview -->
                <div class="receipt-preview p-3 mb-4" style="background: #f8f9fa; border: 1px solid #dee2e6; font-family: monospace; white-space: pre-line; text-align: left; max-width: 300px; margin: 0 auto;">
                    <t t-esc="state.receiptText"/>
                </div>
                
                <!-- Buttons -->
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                    <button class="btn btn-primary" t-on-click="onPrintClick">
                        <i class="fa fa-print me-1"></i>
                        QZ Tray ilə Çap Et
                    </button>
                    <button class="btn btn-secondary" t-on-click="onCancelClick">
                        <i class="fa fa-times me-1"></i>
                        Ləğv Et
                    </button>
                </div>
                
                <!-- Test Mode Info -->
                <div class="alert alert-warning mt-3">
                    <strong>⚠️ QZ Tray Tələbləri:</strong><br/>
                    • QZ Tray programı yüklü olmalıdır<br/>
                    • Printer kompyuterə qoşulu olmalıdır<br/>
                    • QZ Tray proqramı işə salınmalıdır
                </div>
            </div>

            <!-- Printing Mode -->
            <div t-if="state.mode === 'printing'" class="text-center">
                <div class="spinner-border text-primary mb-3" role="status"></div>
                <h5>Çap edilir...</h5>
                <p class="text-muted">QZ Tray-ə qoşulur və printer-ə göndərilir...</p>
            </div>

            <!-- Success Mode -->
            <div t-if="state.mode === 'success'" class="text-center">
                <div class="text-success mb-3">
                    <i class="fa fa-check-circle fa-3x"></i>
                </div>
                <h5 class="text-success">Müvəffəqiyyətlə Çap Edildi!</h5>
                <p class="text-muted">Sənəd printer-ə göndərildi.</p>
                <div class="d-flex justify-content-center gap-2">
                    <button class="btn btn-success" t-on-click="onCancelClick">
                        <i class="fa fa-check me-1"></i>
                        Tamam
                    </button>
                </div>
            </div>

            <!-- Error Mode -->
            <div t-if="state.mode === 'error'" class="text-center">
                <div class="text-danger mb-3">
                    <i class="fa fa-exclamation-triangle fa-3x"></i>
                </div>
                <h5 class="text-danger">Çap Xətası!</h5>
                <div class="alert alert-danger">
                    <t t-esc="state.errorMessage"/>
                </div>
                <div class="d-flex justify-content-center gap-3">
                    <button class="btn btn-primary" t-on-click="() => this.state.mode = 'preview'">
                        <i class="fa fa-arrow-left me-1"></i>
                        Geri Qayıt
                    </button>
                    <button class="btn btn-secondary" t-on-click="onCancelClick">
                        <i class="fa fa-times me-1"></i>
                        Bağla
                    </button>
                </div>
            </div>
        </div>
    </t>

</templates>